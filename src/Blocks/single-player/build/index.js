!function(){"use strict";var e,t={230:function(e,t,r){var a=window.wp.blocks,n=window.wp.element;function o(e){return(0,n.createElement)("div",{className:"song-canvas"},e.audioTitle)}var i=window.wp.components,l=r.p+"images/music.b0a23dd2.png";function c(e){return(0,n.createElement)(i.ResponsiveWrapper,null,(0,n.createElement)("img",{className:"audio-cover",alt:e.audioTitle,src:void 0!==e.audioCover?e.audioCover:l}))}var u=window.wp.blockEditor;function s(e){return(0,n.createElement)(u.MediaUploadCheck,null,(0,n.createElement)(u.MediaUpload,{onSelect:t=>{e.changeAttributes(t)},value:e.audioId,allowedTypes:["audio"],render:t=>{let{open:r}=t;return(0,n.createElement)(i.Button,{onClick:r},0!==e.audioId?"Change the Audio":"Upload a new Audio")}}))}var m=(e,t)=>{var r=Math.round(e/t)*t;return Math.min(r,255)},d=e=>"#"+e.map((e=>{var t=e.toString(16);return 1===t.length?"0"+t:t})).join(""),p=(e,t)=>{for(var r=4*t.sample,a={},n=0;n<e.length;n+=r){var o=[m(e[n],t.group),m(e[n+1],t.group),m(e[n+2],t.group)].join();a[o]=a[o]?a[o]+1:1}return((e,t)=>{var r=e.map((e=>{var r=Array.isArray(e)?e:e.split(",").map(Number);return"hex"===t.format?d(r):r}));return 1===t.amount||1===r.length?r[0]:r})(Object.entries(a).sort((([e,t],[r,a])=>t>a?-1:1)).slice(0,t.amount).map((([e])=>e)),t)};function v(){return(0,n.createElement)("select",{name:"reng-speed",id:"reng-speed"},(0,n.createElement)("option",{value:"1"},"1"),(0,n.createElement)("option",{value:"1.25"},"1.25"),(0,n.createElement)("option",{value:"1.5"},"1.5"),(0,n.createElement)("option",{value:"1.75"},"1.75"),(0,n.createElement)("option",{value:"2"},"2"))}function g(){return(0,n.createElement)("div",{className:"fast-seek"},(0,n.createElement)("i",{className:"icon-backward"}),(0,n.createElement)("i",{className:"icon-forward"}))}function f(){return(0,n.createElement)("button",{className:"play-button","data-playing":"false",role:"switch","aria-checked":"false"},(0,n.createElement)("i",{className:"icon-play"}))}function h(e){return(0,n.createElement)("div",{className:"buttons-bar",style:{backgroundColor:e.backgroundColor}},(0,n.createElement)(v,null),(0,n.createElement)(g,null),(0,n.createElement)(f,null))}function E(e){return(0,n.createElement)("div",{className:"grid-x cell"},(0,n.createElement)("input",{type:"range",id:"time",min:"0",max:"100",step:"0.01",value:"0",width:"100%"}),(0,n.createElement)("audio",{className:"reng-single",src:e.audioUrl}),(0,n.createElement)("div",{className:"seek-container cell"},(0,n.createElement)("canvas",{id:"songWave"}),(0,n.createElement)("div",{className:"mask-container"},(0,n.createElement)("canvas",{id:"songWaveMask"}))))}(0,a.registerBlockType)("amirition/reng-single-player",{edit:function(e){const t=(0,u.useBlockProps)({className:"reng-single-player-block"}),{attributes:r,setAttributes:a}=e;return(0,n.createElement)("div",t,(0,n.createElement)(c,{audioId:r.audioId,audioTitle:r.audioTitle,audioCover:r.audioCover}),(0,n.createElement)(o,{audioTitle:r.audioTitle}),(0,n.createElement)(s,{audioId:r.audioId,changeAttributes:function(t){var r,a;(r=t.image.src,a={amount:1,format:"hex"},((e,t,r)=>new Promise(((a,n)=>{return(o=(e=>"string"==typeof e?e:e.src)(t),new Promise(((e,t)=>{var r=document.createElement("canvas"),a=r.getContext("2d"),n=new Image;n.onload=()=>{r.height=n.height,r.width=n.width,a.drawImage(n,0,0);var t=a.getImageData(0,0,n.width,n.height).data;e(t)},n.onerror=()=>t(Error("Image loading failed.")),n.crossOrigin="",n.src=o}))).then((t=>a(e(t,(({amount:e=3,format:t="array",group:r=20,sample:a=10}={})=>({amount:e,format:t,group:r,sample:a}))(r))))).catch((e=>n(e)));var o})))(p,r,a)).then((r=>{e.setAttributes({audioColor:r,audioUrl:t.url,audioId:t.id,audioCover:t.image.src,audioTitle:t.title})}))}}))},save:e=>(u.useBlockProps.save(),(0,n.createElement)("div",{className:"reng-player"},(0,n.createElement)("div",{className:"thumbnail"},(0,n.createElement)("img",{src:e.attributes.audioCover,className:"audio-cover"})),(0,n.createElement)("div",{className:"song flex horizontal"},(0,n.createElement)("div",{className:"flex vertical left"},(0,n.createElement)(E,{audioUrl:e.attributes.audioUrl}),(0,n.createElement)(h,{backgroundColor:e.attributes.audioColor})),(0,n.createElement)("div",{className:"volume-range"},(0,n.createElement)("input",{type:"range",id:"volume",min:"0",max:"2",step:"0.1",value:"1"})))))})}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=function(t,r,n,o){if(!r){var i=1/0;for(s=0;s<e.length;s++){r=e[s][0],n=e[s][1],o=e[s][2];for(var l=!0,c=0;c<r.length;c++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](r[c])}))?r.splice(c--,1):(l=!1,o<i&&(i=o));if(l){e.splice(s--,1);var u=n();void 0!==u&&(t=u)}}return t}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[r,n,o]},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e}(),function(){var e={826:0,431:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,i=r[0],l=r[1],c=r[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(c)var s=c(a)}for(t&&t(r);u<i.length;u++)o=i[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(s)},r=self.webpackChunkreng_player=self.webpackChunkreng_player||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var n=a.O(void 0,[431],(function(){return a(230)}));n=a.O(n)}();