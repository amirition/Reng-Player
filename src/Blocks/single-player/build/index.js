!function(){"use strict";var e,t={343:function(e,t,r){var a=window.wp.blocks;function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n.apply(this,arguments)}var o=window.wp.element,i=window.wp.components,l=r.p+"images/music.b0a23dd2.png";function c(e){return(0,o.createElement)(i.ResponsiveWrapper,null,(0,o.createElement)("img",{className:"audio-cover",alt:e.audioTitle,src:void 0!==e.audioCover?e.audioCover:l}))}function s(e){return(0,o.createElement)("div",{className:"song-canvas"},e.audioArtist+" - "+e.audioTitle)}var u=window.wp.blockEditor;function d(e){return(0,o.createElement)(u.MediaUploadCheck,null,(0,o.createElement)(u.MediaUpload,{onSelect:t=>{e.changeAttributes(t)},value:e.audioId,allowedTypes:["audio"],render:t=>{let{open:r}=t;return(0,o.createElement)(i.Button,{onClick:r},0!==e.audioId?"Change the Audio":"Upload a new Audio")}}))}var m=(e,t)=>{var r=Math.round(e/t)*t;return Math.min(r,255)},g=e=>"#"+e.map((e=>{var t=e.toString(16);return 1===t.length?"0"+t:t})).join(""),p=(e,t)=>{for(var r=4*t.sample,a={},n=0;n<e.length;n+=r){var o=[m(e[n],t.group),m(e[n+1],t.group),m(e[n+2],t.group)].join();a[o]=a[o]?a[o]+1:1}return((e,t)=>{var r=e.map((e=>{var r=Array.isArray(e)?e:e.split(",").map(Number);return"hex"===t.format?g(r):r}));return 1===t.amount||1===r.length?r[0]:r})(Object.entries(a).sort((([e,t],[r,a])=>t>a?-1:1)).slice(0,t.amount).map((([e])=>e)),t)};function f(e){const t={background:"none",color:e.color},r={backgroundColor:e.backgroundColor,color:e.color};return(0,o.createElement)("select",{style:t,name:"reng-speed",className:"reng-speed"},(0,o.createElement)("option",{style:r,value:".5"},".5x"),(0,o.createElement)("option",{style:r,value:".75"},".75x"),(0,o.createElement)("option",{style:r,value:"1",selected:!0},"1x"),(0,o.createElement)("option",{style:r,value:"1.25"},"1.25x"),(0,o.createElement)("option",{style:r,value:"1.5"},"1.5x"),(0,o.createElement)("option",{style:r,value:"2"},"2x"))}function v(e){const t={color:e.color,display:"flex",flexWrap:"nowrap"};return(0,o.createElement)("div",{className:"fast-seek",style:t},(0,o.createElement)("i",{className:"icon-backward"}),(0,o.createElement)("i",{className:"icon-play play-button","data-playing":"false",role:"switch","aria-checked":"false"}),(0,o.createElement)("i",{className:"icon-forward"}))}function b(e){const t={color:e.color,margin:0,padding:"0 10px"};return(0,o.createElement)("p",{style:t},e.audioArtist," - ",e.audioTitle)}function h(e){const t=(e,t,r,a)=>{let n,o,i,l,c,s,u,d=e=>{const t=parseInt;let r=e.length;const a={};if(r>9){const[n,o,i,l]=e=e.split(",");if(r=e.length,r<3||r>4)return null;a.r=t("a"==n[3]?n.slice(5):n.slice(4)),a.g=t(o),a.b=t(i),a.a=l?parseFloat(l):-1}else{if(8==r||6==r||r<4)return null;r<6&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+(r>4?e[4]+e[4]:"")),e=t(e.slice(1),16),9==r||5==r?(a.r=e>>24&255,a.g=e>>16&255,a.b=e>>8&255,a.a=Math.round((255&e)/.255)/1e3):(a.r=e>>16,a.g=e>>8&255,a.b=255&e,a.a=-1)}return a};const m=parseInt,g=Math.round;let p="string"==typeof r;return"number"!=typeof e||e<-1||e>1||"string"!=typeof t||"r"!=t[0]&&"#"!=t[0]||r&&!p?null:(d||(d=e=>{let t=e.length;const r={};if(t>9){if([n,o,i,p]=e=e.split(","),t=e.length,t<3||t>4)return null;r.r=m("a"==n[3]?n.slice(5):n.slice(4)),r.g=m(o),r.b=m(i),r.a=p?parseFloat(p):-1}else{if(8==t||6==t||t<4)return null;t<6&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+(t>4?e[4]+e[4]:"")),e=m(e.slice(1),16),9==t||5==t?(r.r=e>>24&255,r.g=e>>16&255,r.b=e>>8&255,r.a=g((255&e)/.255)/1e3):(r.r=e>>16,r.g=e>>8&255,r.b=255&e,r.a=-1)}return r}),u=t.length>9,u=p?r.length>9||"c"==r&&!u:u,c=d(t),l=e<0,s=r&&"c"!=r?d(r):l?{r:0,g:0,b:0,a:-1}:{r:255,g:255,b:255,a:-1},l=1-(e=l?-1*e:e),c&&s?(a?(n=g(l*c.r+e*s.r),o=g(l*c.g+e*s.g),i=g(l*c.b+e*s.b)):(n=g((l*c.r**2+e*s.r**2)**.5),o=g((l*c.g**2+e*s.g**2)**.5),i=g((l*c.b**2+e*s.b**2)**.5)),p=c.a,s=s.a,c=p>=0||s>=0,p=c?p<0?s:s<0?p:p*l+s*e:0,u?"rgb"+(c?"a(":"(")+n+","+o+","+i+(c?","+g(1e3*p)/1e3:"")+")":"#"+(4294967296+16777216*n+65536*o+256*i+(c?g(255*p):0)).toString(16).slice(1,c?void 0:-2)):null)},r=function(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?(parseInt(t[1],16)+parseInt(t[2],16)+parseInt(t[3],16))/3>128?"#333":"#f1f1f1":"#333"},a={background:"linear-gradient( 45deg, "+t(.4,e.backgroundColor)+", "+e.backgroundColor+", "+t(.3,e.backgroundColor)+")"};return(0,o.createElement)("div",{className:"details-bar",style:a},(0,o.createElement)(f,{color:r(e.backgroundColor),backgroundColor:e.backgroundColor}),(0,o.createElement)(b,{color:r(e.backgroundColor),audioTitle:e.audioTitle,audioArtist:e.audioArtist}),(0,o.createElement)(v,{color:r(e.backgroundColor)}))}function E(e){return(0,o.createElement)("div",{className:"grid-x cell"},(0,o.createElement)("input",{type:"range",className:"time",min:"0",max:"100",step:"0.01",value:"0",width:"100%"}),(0,o.createElement)("audio",{className:"reng-single",src:e.audioUrl}),(0,o.createElement)("div",{className:"seek-container cell"},(0,o.createElement)("canvas",{className:"songWave"}),(0,o.createElement)("div",{className:"mask-container"},(0,o.createElement)("canvas",{className:"songWaveMask"}))))}(0,a.registerBlockType)("amirition/reng-single-player",{edit:function(e){const t=(0,u.useBlockProps)({className:"reng-single-player-block"}),{attributes:r,setAttributes:a}=e;return(0,o.createElement)("div",n({id:"single-player-block-"+r.audioId},t),(0,o.createElement)(c,{audioId:r.audioId,audioTitle:r.audioTitle,audioCover:r.audioCover}),(0,o.createElement)(s,{audioArtist:r.audioArtist,audioTitle:r.audioTitle}),(0,o.createElement)(d,{audioId:r.audioId,changeAttributes:function(t){var r,a;(r=t.image.src,a={amount:1,format:"hex"},((e,t,r)=>new Promise(((a,n)=>{return(o=(e=>"string"==typeof e?e:e.src)(t),new Promise(((e,t)=>{var r=document.createElement("canvas"),a=r.getContext("2d"),n=new Image;n.onload=()=>{r.height=n.height,r.width=n.width,a.drawImage(n,0,0);var t=a.getImageData(0,0,n.width,n.height).data;e(t)},n.onerror=()=>t(Error("Image loading failed.")),n.crossOrigin="",n.src=o}))).then((t=>a(e(t,(({amount:e=3,format:t="array",group:r=20,sample:a=10}={})=>({amount:e,format:t,group:r,sample:a}))(r))))).catch((e=>n(e)));var o})))(p,r,a)).then((r=>{e.setAttributes({audioColor:r,audioUrl:t.url,audioId:t.id,audioArtist:t.meta.artist,audioCover:t.image.src,audioTitle:t.title})}))}}))},save:e=>(u.useBlockProps.save(),(0,o.createElement)("div",{className:"reng-player reng-single-player"},(0,o.createElement)("div",{className:"thumbnail"},(0,o.createElement)("img",{src:e.attributes.audioCover,className:"audio-cover"})),(0,o.createElement)("div",{className:"song flex horizontal"},(0,o.createElement)("div",{className:"flex vertical left"},(0,o.createElement)(E,{audioUrl:e.attributes.audioUrl}),(0,o.createElement)(h,{audioTitle:e.attributes.audioTitle,audioArtist:e.attributes.audioArtist,backgroundColor:e.attributes.audioColor})))))})}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=function(t,r,n,o){if(!r){var i=1/0;for(u=0;u<e.length;u++){r=e[u][0],n=e[u][1],o=e[u][2];for(var l=!0,c=0;c<r.length;c++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](r[c])}))?r.splice(c--,1):(l=!1,o<i&&(i=o));if(l){e.splice(u--,1);var s=n();void 0!==s&&(t=s)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,n,o]},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e}(),function(){var e={826:0,431:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,i=r[0],l=r[1],c=r[2],s=0;if(i.some((function(t){return 0!==e[t]}))){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(c)var u=c(a)}for(t&&t(r);s<i.length;s++)o=i[s],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},r=self.webpackChunkreng_player=self.webpackChunkreng_player||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var n=a.O(void 0,[431],(function(){return a(343)}));n=a.O(n)}();